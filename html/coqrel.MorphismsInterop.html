<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>coqrel.MorphismsInterop</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library coqrel.MorphismsInterop</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#"><span class="id" title="library">Coq.Classes.Morphisms</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#"><span class="id" title="library">Coq.Relations.Relation_Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="coqrel.RelDefinitions.html#"><span class="id" title="library">RelDefinitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="coqrel.RelOperators.html#"><span class="id" title="library">RelOperators</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="coqrel.Relators.html#"><span class="id" title="library">Relators</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="coqrel.Monotonicity.html#"><span class="id" title="library">Monotonicity</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab63"></a><h1 class="section">Interoperation with <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#"><span class="id" title="library">Coq.Classes.Morphisms</span></a></span></h1>

<div class="paragraph"> </div>

 Although ultimately we will reimplement a <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> tactic, and
  our system is largely designed to replace the setoid rewriting
  support in <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#"><span class="id" title="library">Coq.Classes.Morphisms</span></a></span>, we still want to be compatible
  with it so that:

<div class="paragraph"> </div>

<ul class="doclist">
<li> we can take advantage of the relational properties declared in
      the old system;

</li>
<li> the generalized <span class="inlinecode"><span class="id" title="tactic">setoid_rewrite</span></span> can take advantage of our
      library for answering its <span class="inlinecode"><span class="id" title="var">Morphisms.Proper</span></span> queries.

</li>
</ul>

<div class="paragraph"> </div>

  This compatibility layer is pretty straightforward: we simply
  declare the instances we need in order to use the properties
  declared in the old system, and use <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#rauto"><span class="id" title="projection">rauto</span></a></span> to handle
  <span class="inlinecode"><span class="id" title="var">Morphisms.Proper</span></span> queries. 
<div class="paragraph"> </div>

<a name="lab64"></a><h2 class="section">Using <span class="inlinecode"><span class="id" title="library">Morphisms</span></span>-style relational properties</h2>

<div class="paragraph"> </div>

<a name="lab65"></a><h3 class="section">Relators</h3>

<div class="paragraph"> </div>

 While <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#"><span class="id" title="library">Coq.Classes.Morphisms</span></a></span> uses a distinct set of relators from
  ours, we don't try to map them into our language. Instead, we hook
  them into our system the same way we do our generalized versions,
  so that <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a></span> and the like can be used as just another set of
  "native" Coqrel relators. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="respectful_subrel"><span class="id" title="instance">respectful_subrel</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#28fb2fb3952fac7e01eb907871e1ea99"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="respectful_params"><span class="id" title="instance">respectful_params</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a>) 4.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="respectful_rintro"><span class="id" title="lemma">respectful_rintro</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">RA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">RB</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" title="class">RIntro</span></a> (<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" title="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" title="variable">RB</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#y"><span class="id" title="variable">y</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" title="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" title="variable">RB</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 0 (<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" title="class">RIntro</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#respectful_rintro"><span class="id" title="lemma">respectful_rintro</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="respectful_relim"><span class="id" title="lemma">respectful_relim</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">RA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">RB</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" title="variable">RB</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#m"><span class="id" title="variable">m</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" title="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" title="variable">RB</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" title="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">respectful</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#respectful_relim"><span class="id" title="lemma">respectful_relim</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="forall_relation_subrel"><span class="id" title="instance">forall_relation_subrel</span></a> <span class="id" title="var">A</span> <span class="id" title="var">P</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" title="definition">forall_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a>) (<a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">(</span></a><a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a><a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">)</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="forall_relation_params"><span class="id" title="instance">forall_relation_params</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" title="definition">forall_relation</span></a>) 3.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="forall_relation_rintro"><span class="id" title="lemma">forall_relation_rintro</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">R</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">f</span> <span class="id" title="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" title="class">RIntro</span></a> (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" title="definition">forall_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 0 (<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" title="class">RIntro</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" title="definition">forall_relation</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#forall_relation_rintro"><span class="id" title="lemma">forall_relation_rintro</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="forall_relation_relim"><span class="id" title="lemma">forall_relation_relim</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">R</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" title="definition">forall_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" title="definition">forall_relation</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#forall_relation_relim"><span class="id" title="lemma">forall_relation_relim</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="pointwise_relation_subrel"><span class="id" title="instance">pointwise_relation_subrel</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a>) (<a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="pointwise_relation_params"><span class="id" title="instance">pointwise_relation_params</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a>) 3.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pointwise_relation_rintro"><span class="id" title="lemma">pointwise_relation_rintro</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">R</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" title="class">RIntro</span></a> (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 0 (<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" title="class">RIntro</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#pointwise_relation_rintro"><span class="id" title="lemma">pointwise_relation_rintro</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pointwise_relation_relim"><span class="id" title="lemma">pointwise_relation_relim</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">R</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" title="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#pointwise_relation_relim"><span class="id" title="lemma">pointwise_relation_relim</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
The rewriting system sometimes generates arguments constraints of
  the following form (when rewriting an argument of <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#arrow_rel"><span class="id" title="definition">arrow_rel</span></a></span> for
  instance), which need to be matched against our relational
  properties stated in terms of <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="pointwise_relation_subrel_subrel"><span class="id" title="instance">pointwise_relation_subrel_subrel</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Related"><span class="id" title="class">Related</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>)) <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab66"></a><h3 class="section"><span class="inlinecode"><span class="id" title="var">Morphisms.Proper</span></span> instances</h3>

<div class="paragraph"> </div>

 Now that we can interpret the relators used in <span class="inlinecode"><span class="id" title="library">Morphisms</span></span>-style
  relational properties, we can simply hook instances of
  <span class="inlinecode"><span class="id" title="var">Morphisms.Proper</span></span> into our own database.

<div class="paragraph"> </div>

  We have to be careful about how this instance works. For one thing,
  we are not interested in going through the whole resolution process
  in <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#"><span class="id" title="library">Coq.Classes.Morphisms</span></a></span>, but are only interested in recovering
  user-defined instances as-is. Moreover, we want to avoid a loop with
  <span class="inlinecode"><span class="id" title="var">solve_morphisms_proper</span></span> below, where our library (and hence
  <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#Related"><span class="id" title="record">Related</span></a></span> instances) are used to solve <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span> queries.
  We can make sure both of those things are avoided by using a
  <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#normalization_done"><span class="id" title="inductive">normalization_done</span></a></span> hypothesis with our <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span> query. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="morphisms_proper_related"><span class="id" title="instance">morphisms_proper_related</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">R</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">a</span>: <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#normalization_done"><span class="id" title="inductive">normalization_done</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" title="variable">R</span></a> | 10.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab67"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" title="class">subrelation</span></a></span> instances</h3>

<div class="paragraph"> </div>

 Likewise, we want to be able to use <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" title="class">subrelation</span></a></span> declaration as
  <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a></span> instances. Again, we use an immediate hint. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subrelation_subrel"><span class="id" title="lemma">subrelation_subrel</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">R1</span> <span class="id" title="var">R2</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" title="variable">A</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" title="class">subrelation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R1"><span class="id" title="variable">R1</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R2"><span class="id" title="variable">R2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Related"><span class="id" title="class">Related</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R1"><span class="id" title="variable">R1</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R2"><span class="id" title="variable">R2</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Immediate</span> <span class="id" title="var">subrelation_subrel</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab68"></a><h2 class="section">Satisfying <span class="inlinecode"><span class="id" title="var">Morphisms.Proper</span></span> queries</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_morphisms_proper</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#normalization_done"><span class="id" title="inductive">normalization_done</span></a> |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#apply_subrelation"><span class="id" title="inductive">apply_subrelation</span></a> |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 10 (<a class="idref" href="http://coq.inria.fr/distrib/8.6.1/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Morphisms.Proper</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_morphisms_proper</span> : <span class="id" title="var">typeclass_instances</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>