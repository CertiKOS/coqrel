<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>coqrel.MorphismsInterop</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library coqrel.MorphismsInterop</h1>

<div class="code">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#"><span class="id" type="library">Coq.Classes.Morphisms</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#"><span class="id" type="library">Coq.Relations.Relation_Definitions</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="coqrel.RelDefinitions.html#"><span class="id" type="library">RelDefinitions</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="coqrel.RelOperators.html#"><span class="id" type="library">RelOperators</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="coqrel.Relators.html#"><span class="id" type="library">Relators</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="coqrel.Monotonicity.html#"><span class="id" type="library">Monotonicity</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h1 class="section">Interoperation with <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#"><span class="id" type="library">Coq.Classes.Morphisms</span></a></span></h1>

<div class="paragraph"> </div>

 Although ultimately we will reimplement a <span class="inlinecode"><span class="id" type="tactic">rewrite</span></span> tactic, and
  our system is largely designed to replace the setoid rewriting
  support in <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#"><span class="id" type="library">Coq.Classes.Morphisms</span></a></span>, we still want to be compatible
  with it so that:

<div class="paragraph"> </div>

<ul class="doclist">
<li> we can take advantage of the relational properties declared in
      the old system;

</li>
<li> the generalized <span class="inlinecode"><span class="id" type="tactic">setoid_rewrite</span></span> can take advantage of our
      library for answering its <span class="inlinecode"><span class="id" type="var">Morphisms.Proper</span></span> queries.

</li>
</ul>

<div class="paragraph"> </div>

  This compatibility layer is pretty straightforward: we simply
  declare the instances we need in order to use the properties
  declared in the old system, and use <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#rauto"><span class="id" type="projection">rauto</span></a></span> to handle
  <span class="inlinecode"><span class="id" type="var">Morphisms.Proper</span></span> queries. 
<div class="paragraph"> </div>

<a name="lab13"></a><h2 class="section">Using <span class="inlinecode"><span class="id" type="library">Morphisms</span></span>-style relational properties</h2>

<div class="paragraph"> </div>

<a name="lab14"></a><h3 class="section">Relators</h3>

<div class="paragraph"> </div>

 While <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#"><span class="id" type="library">Coq.Classes.Morphisms</span></a></span> uses a distinct set of relators from
  ours, we don't try to map them into our language. Instead, we hook
  them into our system the same way we do our generalized versions,
  so that <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" type="definition">respectful</span></a></span> and the like can be used as just another set of
  "native" Coqrel relators. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Global Instance</span> <a name="respectful_subrel"><span class="id" type="instance">respectful_subrel</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" type="abbreviation">Monotonic</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" type="definition">respectful</span></a>) (<a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#:rel_scope:x_'-->'_x"><span class="id" type="notation">--&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#:rel_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Global Instance</span> <a name="respectful_rintro"><span class="id" type="instance">respectful_rintro</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} (<span class="id" type="var">RA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>) (<span class="id" type="var">RB</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" type="variable">B</span></a>) <span class="id" type="var">f</span> <span class="id" type="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" type="class">RIntro</span></a> (<span class="id" type="keyword">∀</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" type="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#y"><span class="id" type="variable">y</span></a> → <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" type="variable">RB</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#y"><span class="id" type="variable">y</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" type="definition">respectful</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" type="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" type="variable">RB</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="respectful_relim"><span class="id" type="lemma">respectful_relim</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} (<span class="id" type="var">RA</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>) (<span class="id" type="var">RB</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" type="variable">B</span></a>) <span class="id" type="var">f</span> <span class="id" type="var">g</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" type="variable">RB</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#m"><span class="id" type="variable">m</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#n"><span class="id" type="variable">n</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" type="variable">Q</span></a> →<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" type="definition">respectful</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" type="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#RB"><span class="id" type="variable">RB</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#RA"><span class="id" type="variable">RA</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" type="variable">P</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" type="variable">Q</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Extern</span> 1 (<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#respectful"><span class="id" type="definition">respectful</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#respectful_relim"><span class="id" type="lemma">respectful_relim</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" type="keyword">Global Instance</span> <a name="forall_relation_subrel"><span class="id" type="instance">forall_relation_subrel</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" type="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" type="definition">forall_relation</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#:rel_scope:x_'++>'_x"><span class="id" type="notation">(</span></a><a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a><a class="idref" href="coqrel.RelDefinitions.html#:rel_scope:x_'++>'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="coqrel.RelDefinitions.html#:rel_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Global Instance</span> <a name="forall_relation_rintro"><span class="id" type="instance">forall_relation_rintro</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} (<span class="id" type="var">R</span>: <span class="id" type="keyword">∀</span> <span class="id" type="var">a</span>:<a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" type="variable">B</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>)) <span class="id" type="var">f</span> <span class="id" type="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" type="class">RIntro</span></a> (<span class="id" type="keyword">∀</span> <span class="id" type="var">a</span>, <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" type="definition">forall_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="forall_relation_relim"><span class="id" type="lemma">forall_relation_relim</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} (<span class="id" type="var">R</span>: <span class="id" type="keyword">∀</span> <span class="id" type="var">a</span>:<a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" type="variable">B</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>)) <span class="id" type="var">f</span> <span class="id" type="var">g</span> <span class="id" type="var">a</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" type="variable">Q</span></a> →<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" type="definition">forall_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" type="variable">Q</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Extern</span> 1 (<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#forall_relation"><span class="id" type="definition">forall_relation</span></a> <span class="id" type="var">_</span>) <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#forall_relation_relim"><span class="id" type="lemma">forall_relation_relim</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" type="keyword">Global Instance</span> <a name="pointwise_relation_subrel"><span class="id" type="instance">pointwise_relation_subrel</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" type="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" type="definition">pointwise_relation</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#::'forallr'_'-'_','_x"><span class="id" type="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#:rel_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Global Instance</span> <a name="pointwise_relation_rintro"><span class="id" type="instance">pointwise_relation_rintro</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} (<span class="id" type="var">R</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" type="variable">B</span></a>) <span class="id" type="var">f</span> <span class="id" type="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RIntro"><span class="id" type="class">RIntro</span></a> (<span class="id" type="keyword">∀</span> <span class="id" type="var">a</span>, <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" type="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pointwise_relation_relim"><span class="id" type="lemma">pointwise_relation_relim</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} (<span class="id" type="var">R</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#B"><span class="id" type="variable">B</span></a>) <span class="id" type="var">f</span> <span class="id" type="var">g</span> <span class="id" type="var">a</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a> (<a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" type="variable">Q</span></a> →<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" type="definition">pointwise_relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="coqrel.MorphismsInterop.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#Q"><span class="id" type="variable">Q</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Extern</span> 1 (<a class="idref" href="coqrel.RelDefinitions.html#RElim"><span class="id" type="class">RElim</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" type="definition">pointwise_relation</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="coqrel.MorphismsInterop.html#pointwise_relation_relim"><span class="id" type="lemma">pointwise_relation_relim</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab15"></a><h3 class="section"><span class="inlinecode"><span class="id" type="var">Morphisms.Proper</span></span> instances</h3>

<div class="paragraph"> </div>

 Now that we can interpret the relators used in <span class="inlinecode"><span class="id" type="library">Morphisms</span></span>-style
  relational properties, we can simply hook instances of
  <span class="inlinecode"><span class="id" type="var">Morphisms.Proper</span></span> into our own database. We don't want to use the
  corresponding deductive infrastructure in <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#"><span class="id" type="library">Coq.Classes.Morphisms</span></a></span>,
  so we declare the following as an immediate hint so that we only use
  "leaf" instances of <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#Proper"><span class="id" type="abbreviation">Proper</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="morphisms_proper_related"><span class="id" type="lemma">morphisms_proper_related</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>) (<span class="id" type="var">a</span>: <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Morphisms.Proper</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a> →<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" type="abbreviation">Monotonic</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R"><span class="id" type="variable">R</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Immediate</span> <a class="idref" href="coqrel.MorphismsInterop.html#morphisms_proper_related"><span class="id" type="lemma">morphisms_proper_related</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" type="class">subrelation</span></a></span> instances</h3>

<div class="paragraph"> </div>

 Likewise, we want to be able to use <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" type="class">subrelation</span></a></span> declaration as
  <span class="inlinecode"><a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a></span> instances. Again, we use an immediate hint. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="subrelation_subrel"><span class="id" type="lemma">subrelation_subrel</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R1</span> <span class="id" type="var">R2</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#A"><span class="id" type="variable">A</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" type="class">subrelation</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R2"><span class="id" type="variable">R2</span></a> →<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Related"><span class="id" type="class">Related</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="coqrel.MorphismsInterop.html#R2"><span class="id" type="variable">R2</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" type="definition">subrel</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">firstorder</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Immediate</span> <a class="idref" href="coqrel.MorphismsInterop.html#subrelation_subrel"><span class="id" type="lemma">subrelation_subrel</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab17"></a><h2 class="section">Satisfying <span class="inlinecode"><span class="id" type="var">Morphisms.Proper</span></span> queries</h2>

<div class="paragraph"> </div>

 This is quite straightforward. The only slightly subtle part is,
  we need to avoid a loop with <span class="inlinecode"><a class="idref" href="coqrel.MorphismsInterop.html#morphisms_proper_related"><span class="id" type="lemma">morphisms_proper_related</span></a></span> above. We
  use a hypothesis of the following type as a flag to avoid reentry. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">CoInductive</span> <a name="in_solve_morphisms_proper"><span class="id" type="inductive">in_solve_morphisms_proper</span></a> := <a name="in_solve_morphisms_proper_intro"><span class="id" type="constructor">in_solve_morphisms_proper_intro</span></a>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">solve_morphisms_proper</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#normalization_done"><span class="id" type="inductive">normalization_done</span></a> |- <span class="id" type="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#apply_subrelation"><span class="id" type="inductive">apply_subrelation</span></a> |- <span class="id" type="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">red</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">solve_monotonic</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Extern</span> 10 (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Morphisms.Proper</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" type="var">solve_morphisms_proper</span> : <span class="id" type="var">typeclass_instances</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>